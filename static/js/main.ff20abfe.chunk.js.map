{"version":3,"sources":["store/reducers/weatherCardReducer.js","store/reducers/mainPageReducer.js","components/WeatherCard/WeatherCard.jsx","healper.js","components/SavedCity/SavedCity.jsx","components/MainPage/MainPage.jsx","App.js","store/reducers/rootReducer.js","store/store.js","meterialTheme.js","index.js"],"names":["defaultWeatherCardState","isFahrenheit","IS_FAHRENHEIT","favourites","JSON","parse","localStorage","getItem","error","defaultMainPageState","query","isLoading","isError","weather","QUERY","IS_LOADING","IS_ERROR","WEATHER","FAVOURITES","FETCH_WEATHER","setIsLoadingAction","payload","type","setIsErrorAction","setWeatherAction","setFavouritesAction","fetchWeather","searchValue","dispatch","trim","axios","get","process","REACT_APP_API_KEY","then","res","catch","err","WeatherCard","temp","useDispatch","useSelector","state","mainPage","weatherCard","setIsFahrenheit","setIsFahrenheitAction","cities","Math","round","data","main","useEffect","className","name","sys","country","FormControlLabel","control","Switch","label","onChange","onClick","push","filteredCities","arr","used","filter","obj","id","unique","saveCity","SavedCity","cityName","removeItem","e","stopPropagation","color","size","MainPage","newArr","city","setItem","stringify","placeholder","target","value","onKeyDown","keyCode","onKeyDownHandler","Button","variant","style","borderColor","CircularProgress","length","map","App","rootReducer","combineReducers","action","store","createStore","applyMiddleware","thunk","theme","createTheme","palette","secondary","ReactDOM","render","StrictMode","ThemeProvider","document","getElementById"],"mappings":"8TAAMA,EAA0B,CAC9BC,cAAc,GAGHC,EAAgB,gB,iBCFzBC,EAAa,GAEjB,IACEA,EAAaC,KAAKC,MAAMC,aAAaC,QAAQ,WAC7C,MAAOC,IAIT,IAAMC,EAAuB,CAC3BC,MAAO,GACPC,WAAW,EACXC,SAAS,EACTC,QAAS,GACTV,WAAYA,GAGDW,EAAQ,QACRC,EAAa,aACbC,EAAW,WACXC,EAAU,UACVC,EAAa,aACbC,EAAgB,gBA0BhBC,EAAqB,SAACC,GAAD,MAAc,CAC9CC,KAAMP,EACNM,YAEWE,EAAmB,SAACF,GAAD,MAAc,CAC5CC,KAAMN,EACNK,YAEWG,EAAmB,SAACH,GAAD,MAAc,CAC5CC,KAAML,EACNI,YAEWI,EAAsB,SAACJ,GAAD,MAAc,CAC/CC,KAAMJ,EACNG,YAOWK,EAAe,WAA6B,IAA5BC,EAA2B,uDAAb,SACzC,OAAO,SAACC,GACqB,KAAvBD,EAAYE,SACdD,EAASR,GAAmB,IAC5BU,IACGC,IADH,4DAEyDJ,EAFzD,+BAE2FK,+IAAYC,oBAEpGC,MAAK,SAACC,GACLP,EAASJ,EAAiBW,IAC1BP,EAASR,GAAmB,IAC5BQ,EAASL,GAAiB,OAE3Ba,OAAM,SAAUC,GACfT,EAASR,GAAmB,IAC5BQ,EAASL,GAAiB,U,OCTrBe,EAjEK,SAAC,GAA6B,IAU5CC,EAViB1B,EAA0B,EAA1BA,QAASV,EAAiB,EAAjBA,WACxByB,EAAWY,cAET5B,EAAY6B,aAAY,SAACC,GAAD,OAAWA,EAAMC,YAAzC/B,QAEAX,EAAiBwC,aAAY,SAACC,GAAD,OAAWA,EAAME,eAA9C3C,aACF4C,EAAkB,SAACxB,GACvBO,EFFiC,SAACP,GAAD,MAAc,CACjDC,KAAMpB,EACNmB,WEAWyB,CAAsBzB,KAI7B0B,EAAM,YAAO5C,GAYZS,IAJE2B,EAKItC,EALA,UAAM+C,KAAKC,MAAgC,EAAzBpC,EAAQqC,KAAKC,KAAKZ,KAAY,EAAI,IAApD,SACA,UAAMS,KAAKC,MAAMpC,EAAQqC,KAAKC,KAAKZ,MAAnC,UAeX,OAFAa,qBAAU,cAAU,IAGlB,mCACIxC,EAsBA,oBAAIyC,UAAU,YAAd,8BArBA,qCACE,sBAAKA,UAAU,gBAAf,UACE,sBAAKA,UAAU,WAAf,UACGxC,EAAQqC,KAAKI,KADhB,KACwBzC,EAAQqC,KAAKK,IAAIC,WAEzC,qBAAKH,UAAU,OAAf,SAAuBd,IACvB,qBAAKc,UAAU,gBAAf,SAAgCxC,EAAQqC,KAAKrC,QAAQ,GAAGsC,UAE1D,sBAAKE,UAAU,kBAAf,UACE,cAACI,EAAA,EAAD,CACEC,QAAS,cAACC,EAAA,EAAD,IACTC,MAAM,aACNC,SAAU,WApCpBhB,GAAiB5C,IAqCPoD,UAAU,eAEZ,wBAAQA,UAAU,UAAUS,QAAS,kBA1B9B,WACff,EAAOgB,KAAKlD,EAAQqC,MACpB,IAAIc,ECxCc,SAACC,GACrB,IAAIC,EAAO,GAIX,OAHqBD,EAAIE,QAAO,SAAUC,GACxC,OAAOA,EAAIC,MAAMH,EAAO,EAAKA,EAAKE,EAAIC,IAAM,KDqCvBC,CAAOvB,GAC5BnB,EAASH,EAAoBuC,IAuBsBO,IAA3C,4C,yBE/BGC,EAzBG,SAAC,GAAkC,IAAhCC,EAA+B,EAA/BA,SAAUC,EAAqB,EAArBA,WAAYL,EAAS,EAATA,GACnCzC,EAAWY,cACjB,OACE,qBAAKa,UAAU,aAAf,SACE,yBACEA,UAAU,kBACVS,QAAS,SAACa,GACR/C,EAASF,EAAa+C,KAH1B,UAME,qBAAKpB,UAAU,aAAf,SAA6BoB,IAC7B,qBACEpB,UAAU,UACVS,QAAS,SAACa,GACRA,EAAEC,kBACFF,EAAWL,IAJf,SAOE,cAAC,IAAD,CAAYQ,MAAM,YAAY,aAAW,SAASC,KAAK,kB,kBCiFlDC,EA1FE,WACf,IAAMnD,EAAWY,cAEjB,EAA2DC,aACzD,SAACC,GAAD,OAAWA,EAAMC,YADXjC,EAAR,EAAQA,MAAOC,EAAf,EAAeA,UAAWC,EAA1B,EAA0BA,QAASC,EAAnC,EAAmCA,QAASV,EAA5C,EAA4CA,WAUtCuE,EAAa,SAACL,GAClB,IAAMW,EAAS7E,EAAWgE,QAAO,SAACc,GAAD,OAAUA,EAAKZ,KAAOA,KACvDzC,EAASH,EAAoBuD,KAW/B,OARA5B,qBAAU,WACRxB,EAASF,OACR,IAEH0B,qBAAU,WACR9C,aAAa4E,QAAQ,SAAU9E,KAAK+E,UAAUhF,MAC7C,CAACA,IAGF,qCACE,sBACEkD,UACyB,oBAAhBxC,EAAQqC,KACXrC,EAAQqC,KAAKC,KAAKZ,KAAO,GACvB,eACA,oBACF,eANR,UASE,sBAAKc,UAAU,aAAf,UACE,uBACEA,UAAU,eACV/B,KAAK,OACL8D,YAAY,gBACZvB,SAAU,SAACc,GAAD,OAAO/C,GJdEP,EIcsBsD,EAAEU,OAAOC,MJdlB,CAC1ChE,KAAMR,EACNO,aAF4B,IAACA,GIenBiE,MAAO5E,EACP6E,UAAW,SAACZ,GAAD,OArCI,SAACA,GACN,KAAdA,EAAEa,SACJ5D,EAASF,EAAahB,IAmCE+E,CAAiBd,MAErC,cAACe,EAAA,EAAD,CACEC,QAAQ,WACRb,KAAK,QACLD,MAAM,UACNe,MAAO,CAAEC,YAAa,QACtB/B,QAAS,kBAAMlC,EAASF,EAAahB,KALvC,uBAUAC,EAQA,qBAAK0C,UAAU,SAAf,SACE,cAACyC,EAAA,EAAD,CAAkBjB,MAAM,gBAR1B,cAAC,EAAD,CACEhE,QAASA,EACTF,UAAWA,EACXC,QAASA,EACTT,WAAYA,OAQlB,sBAAKkD,UAAU,MAAf,UACE,8CACA,qBAAKA,UAAU,YAAf,SACyB,IAAtBlD,EAAW4F,OACR5F,EAAW6F,KAAI,SAACf,GAChB,OACE,cAAC,EAAD,CAEEZ,GAAIY,EAAKZ,GACTI,SAAUQ,EAAK3B,KACfoB,WAAYA,GAHPO,EAAKZ,OAOd,8BCzFC4B,MARf,WACE,OACE,qBAAK5C,UAAU,MAAf,SACE,cAAC,EAAD,O,gBCFO6C,EAAcC,YAAgB,CACzCxD,SNoB6B,WAA2C,IAA1CD,EAAyC,uDAAjCjC,EAAsB2F,EAAW,uCACvE,OAAQA,EAAO9E,MACb,KAAKR,EACH,OAAO,2BAAK4B,GAAZ,IAAmBhC,MAAO0F,EAAO/E,UACnC,KAAKN,EACH,OAAO,2BAAK2B,GAAZ,IAAmB/B,UAAWyF,EAAO/E,UACvC,KAAKL,EACH,OAAO,2BAAK0B,GAAZ,IAAmB9B,QAASwF,EAAO/E,UACrC,KAAKJ,EACH,OAAO,2BAAKyB,GAAZ,IAAmB7B,QAASuF,EAAO/E,UACrC,KAAKH,EACH,OAAO,2BAAKwB,GAAZ,IAAmBvC,WAAYiG,EAAO/E,UACxC,KAAKF,EACH,OAAO,2BAAKuB,GAAZ,IAAmB7B,QAAQ,GAAD,mBAAM6B,EAAM7B,SAAZ,CAAqBuF,EAAO/E,YAExD,QACE,OAAOqB,IMnCXE,YPAgC,WAA8C,IAA7CF,EAA4C,uDAApC1C,EAAyBoG,EAAW,uCAC7E,OAAQA,EAAO9E,MACb,KAAKpB,EACH,OAAO,2BAAKwC,GAAZ,IAAmBzC,aAAcmG,EAAO/E,UAE1C,QACE,OAAOqB,MQRA2D,EAAQC,YAAYJ,EAAaK,YAAgBC,M,iBCFjDC,EAAQC,YAAY,CAC/BC,QAAS,CACPC,UAAW,CACTzD,KAAM,cCIZ0D,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAACC,EAAA,EAAD,CAAeP,MAAOA,EAAtB,SACE,cAAC,IAAD,CAAUJ,MAAOA,EAAjB,SACE,cAAC,EAAD,UAINY,SAASC,eAAe,W","file":"static/js/main.ff20abfe.chunk.js","sourcesContent":["const defaultWeatherCardState = {\n  isFahrenheit: false,\n}\n\nexport const IS_FAHRENHEIT = 'IS_FAHRENHEIT'\n\nexport const weatherCardReducer = (state = defaultWeatherCardState, action) => {\n  switch (action.type) {\n    case IS_FAHRENHEIT:\n      return { ...state, isFahrenheit: action.payload }\n\n    default:\n      return state\n  }\n}\n\nexport const setIsFahrenheitAction = (payload) => ({\n  type: IS_FAHRENHEIT,\n  payload,\n})\n","import axios from 'axios'\n\nlet favourites = []\n\ntry {\n  favourites = JSON.parse(localStorage.getItem('cities'))\n} catch (error) {\n  //\n}\n\nconst defaultMainPageState = {\n  query: '',\n  isLoading: true,\n  isError: false,\n  weather: [],\n  favourites: favourites,\n}\n\nexport const QUERY = 'QUERY'\nexport const IS_LOADING = 'IS_LOADING'\nexport const IS_ERROR = 'IS_ERROR'\nexport const WEATHER = 'WEATHER'\nexport const FAVOURITES = 'FAVOURITES'\nexport const FETCH_WEATHER = 'FETCH_WEATHER'\n\nexport const mainPageReducer = (state = defaultMainPageState, action) => {\n  switch (action.type) {\n    case QUERY:\n      return { ...state, query: action.payload }\n    case IS_LOADING:\n      return { ...state, isLoading: action.payload }\n    case IS_ERROR:\n      return { ...state, isError: action.payload }\n    case WEATHER:\n      return { ...state, weather: action.payload }\n    case FAVOURITES:\n      return { ...state, favourites: action.payload }\n    case FETCH_WEATHER:\n      return { ...state, weather: [...state.weather, action.payload] }\n\n    default:\n      return state\n  }\n}\n\nexport const setQueryAction = (payload) => ({\n  type: QUERY,\n  payload,\n})\nexport const setIsLoadingAction = (payload) => ({\n  type: IS_LOADING,\n  payload,\n})\nexport const setIsErrorAction = (payload) => ({\n  type: IS_ERROR,\n  payload,\n})\nexport const setWeatherAction = (payload) => ({\n  type: WEATHER,\n  payload,\n})\nexport const setFavouritesAction = (payload) => ({\n  type: FAVOURITES,\n  payload,\n})\nexport const fetchWeatherAction = (payload) => ({\n  type: FETCH_WEATHER,\n  payload,\n})\n\nexport const fetchWeather = (searchValue = 'london') => {\n  return (dispatch) => {\n    if (searchValue.trim() !== '') {\n      dispatch(setIsLoadingAction(true))\n      axios\n        .get(\n          `https://api.openweathermap.org/data/2.5/weather?q=${searchValue}&units=metric&APPID=${process.env.REACT_APP_API_KEY}`\n        )\n        .then((res) => {\n          dispatch(setWeatherAction(res))\n          dispatch(setIsLoadingAction(false))\n          dispatch(setIsErrorAction(false))\n        })\n        .catch(function (err) {\n          dispatch(setIsLoadingAction(false))\n          dispatch(setIsErrorAction(true))\n        })\n    }\n  }\n}\n","import './WeatherCard.css'\n\nimport React from 'react'\nimport FormControlLabel from '@material-ui/core/FormControlLabel'\nimport Switch from '@material-ui/core/Switch'\nimport { useEffect } from 'react'\nimport { unique } from '../../healper'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { setIsFahrenheitAction } from '../../store/reducers/weatherCardReducer'\nimport { setFavouritesAction } from '../../store/reducers/mainPageReducer'\n\nconst WeatherCard = ({ weather, favourites }) => {\n  const dispatch = useDispatch()\n\n  const { isError } = useSelector((state) => state.mainPage)\n\n  const { isFahrenheit } = useSelector((state) => state.weatherCard)\n  const setIsFahrenheit = (payload) => {\n    dispatch(setIsFahrenheitAction(payload))\n  }\n\n  let temp\n  let cities = [...favourites]\n\n  const handleChange = () => {\n    setIsFahrenheit(!isFahrenheit)\n  }\n\n  const calcTemp = (fahrenheit) => {\n    fahrenheit\n      ? (temp = `${Math.round((weather.data.main.temp * 9) / 5 + 32)}°F`)\n      : (temp = `${Math.round(weather.data.main.temp)}°C`)\n  }\n\n  if (!isError) {\n    calcTemp(isFahrenheit)\n  }\n\n  const saveCity = () => {\n    cities.push(weather.data)\n    let filteredCities = unique(cities)\n    dispatch(setFavouritesAction(filteredCities))\n  }\n\n  useEffect(() => {}, [])\n\n  return (\n    <>\n      {!isError ? (\n        <>\n          <div className=\"weather__card\">\n            <div className=\"location\">\n              {weather.data.name}, {weather.data.sys.country}\n            </div>\n            <div className=\"temp\">{temp}</div>\n            <div className=\"weather-descr\">{weather.data.weather[0].main}</div>\n          </div>\n          <div className=\"bottom-controls\">\n            <FormControlLabel\n              control={<Switch />}\n              label=\"Fahrenheit\"\n              onChange={() => handleChange()}\n              className=\"city-input\"\n            />\n            <button className=\"fav-btn\" onClick={() => saveCity()}>\n              Add city to favourite\n            </button>\n          </div>\n        </>\n      ) : (\n        <h1 className=\"error-msg\">Nothing found :(</h1>\n      )}\n    </>\n  )\n}\n\nexport default WeatherCard\n","export const unique = (arr) => {\n  let used = {}\n  let filteredCities = arr.filter(function (obj) {\n    return obj.id in used ? 0 : (used[obj.id] = 1)\n  })\n  return filteredCities\n}\n","import './SavedCity.css'\n\nimport React from 'react'\n\nimport DeleteIcon from '@material-ui/icons/Delete'\nimport { fetchWeather } from '../../store/reducers/mainPageReducer'\nimport { useDispatch } from 'react-redux'\n\nconst SavedCity = ({ cityName, removeItem, id }) => {\n  const dispatch = useDispatch()\n  return (\n    <div className=\"saved-city\">\n      <button\n        className=\"saved-city__btn\"\n        onClick={(e) => {\n          dispatch(fetchWeather(cityName))\n        }}\n      >\n        <div className=\"city__name\">{cityName}</div>\n        <div\n          className=\"del-btn\"\n          onClick={(e) => {\n            e.stopPropagation()\n            removeItem(id)\n          }}\n        >\n          <DeleteIcon color=\"secondary\" aria-label=\"delete\" size=\"small\" />\n        </div>\n      </button>\n    </div>\n  )\n}\n\nexport default SavedCity\n","import './MainPage.css'\n\nimport React from 'react'\nimport WeatherCard from '../WeatherCard/WeatherCard'\nimport SavedCity from '../SavedCity/SavedCity'\n\nimport Button from '@material-ui/core/Button'\nimport { CircularProgress } from '@material-ui/core'\n\nimport { useEffect } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport {\n  setFavouritesAction,\n  setQueryAction,\n  fetchWeather,\n} from '../../store/reducers/mainPageReducer'\n\nconst MainPage = () => {\n  const dispatch = useDispatch()\n\n  const { query, isLoading, isError, weather, favourites } = useSelector(\n    (state) => state.mainPage\n  )\n\n  const onKeyDownHandler = (e) => {\n    if (e.keyCode === 13) {\n      dispatch(fetchWeather(query))\n    }\n  }\n\n  const removeItem = (id) => {\n    const newArr = favourites.filter((city) => city.id !== id)\n    dispatch(setFavouritesAction(newArr))\n  }\n\n  useEffect(() => {\n    dispatch(fetchWeather())\n  }, [])\n\n  useEffect(() => {\n    localStorage.setItem('cities', JSON.stringify(favourites))\n  }, [favourites])\n\n  return (\n    <>\n      <div\n        className={\n          typeof weather.data != 'undefined'\n            ? weather.data.main.temp > 16\n              ? 'weather-main'\n              : 'weather-main cold'\n            : 'weather-main'\n        }\n      >\n        <div className=\"search-box\">\n          <input\n            className=\"weater-input\"\n            type=\"text\"\n            placeholder=\"Enter city...\"\n            onChange={(e) => dispatch(setQueryAction(e.target.value))}\n            value={query}\n            onKeyDown={(e) => onKeyDownHandler(e)}\n          />\n          <Button\n            variant=\"outlined\"\n            size=\"small\"\n            color=\"primary\"\n            style={{ borderColor: '#fff' }}\n            onClick={() => dispatch(fetchWeather(query))}\n          >\n            Search\n          </Button>\n        </div>\n        {!isLoading ? (\n          <WeatherCard\n            weather={weather}\n            isLoading={isLoading}\n            isError={isError}\n            favourites={favourites}\n          />\n        ) : (\n          <div className=\"loader\">\n            <CircularProgress color=\"secondary\" />\n          </div>\n        )}\n      </div>\n      <div className=\"fav\">\n        <h1>Saved cities</h1>\n        <div className=\"fav-items\">\n          {favourites.length !== 0\n            ? favourites.map((city) => {\n              return (\n                <SavedCity\n                  key={city.id}\n                  id={city.id}\n                  cityName={city.name}\n                  removeItem={removeItem}\n                />\n              )\n            })\n            : 'No favorite cities'}\n        </div>\n      </div>\n    </>\n  )\n}\n\nexport default MainPage\n","import './App.css'\nimport MainPage from './components/MainPage/MainPage'\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <MainPage />\n    </div>\n  )\n}\n\nexport default App\n","import { combineReducers } from 'redux'\nimport { mainPageReducer } from './mainPageReducer'\nimport { weatherCardReducer } from './weatherCardReducer'\n\nexport const rootReducer = combineReducers({\n  mainPage: mainPageReducer,\n  weatherCard: weatherCardReducer,\n})","import { createStore, applyMiddleware } from 'redux'\nimport thunk from 'redux-thunk'\nimport { rootReducer } from './reducers/rootReducer'\n\nexport const store = createStore(rootReducer, applyMiddleware(thunk))","import { createTheme } from '@material-ui/core/styles'\n\nexport const theme = createTheme({\n  palette: {\n    secondary: {\n      main: '#ffffff',\n    },\n  },\n})\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\nimport { Provider } from 'react-redux'\nimport { store } from './store/store'\nimport { ThemeProvider } from '@material-ui/styles'\nimport { theme } from './meterialTheme'\n\nReactDOM.render(\n  <React.StrictMode>\n    <ThemeProvider theme={theme}>\n      <Provider store={store}>\n        <App />\n      </Provider>\n    </ThemeProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}